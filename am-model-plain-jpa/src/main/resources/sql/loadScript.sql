--
-- Triggers for LAST_UPDATE_DATE
--
DROP TRIGGER IF EXISTS before_product_insert;
DROP TRIGGER IF EXISTS before_product_update;
DROP TRIGGER IF EXISTS before_exchange_rate_insert;
DROP TRIGGER IF EXISTS before_exchange_rate_update;
CREATE TRIGGER before_product_insert BEFORE INSERT ON `PRODUCT` FOR EACH ROW SET NEW.LAST_MODIFIED_DATE = CURRENT_TIMESTAMP;
CREATE TRIGGER before_product_update BEFORE UPDATE ON `PRODUCT` FOR EACH ROW SET NEW.LAST_MODIFIED_DATE = CURRENT_TIMESTAMP;
CREATE TRIGGER before_exchange_rate_insert BEFORE INSERT ON `EXCHANGE_RATE` FOR EACH ROW SET NEW.LAST_MODIFIED_DATE = CURRENT_TIMESTAMP;
CREATE TRIGGER before_exchange_rate_update BEFORE UPDATE ON `EXCHANGE_RATE` FOR EACH ROW SET NEW.LAST_MODIFIED_DATE = CURRENT_TIMESTAMP;

-- 
-- Static data initialization
--
INSERT INTO `PROPERTY` (`PROPERTY_ID`, `PROPERTY_KEY`, `NAME`, `VALUE`) VALUES (1, 'default.date.pattern', 'formatter', 'dd-MMM-YYYY HH:mm:ss z');
INSERT INTO `PROPERTY` (`PROPERTY_ID`, `PROPERTY_KEY`, `NAME`, `VALUE`) VALUES (2, 'default.timezone', 'formatter', 'Europe/London');
INSERT INTO `PROPERTY` (`PROPERTY_ID`, `PROPERTY_KEY`, `NAME`, `VALUE`) VALUES (3, 'default.locale', 'formatter', 'UK');
INSERT INTO `PROPERTY` (`PROPERTY_ID`, `PROPERTY_KEY`, `NAME`, `VALUE`) VALUES (4, 'default.decimal.format', 'formatter', '#,##0.00');
INSERT INTO `PROPERTY` (`PROPERTY_ID`, `PROPERTY_KEY`, `NAME`, `VALUE`) VALUES (5, 'quote.url', 'bloomberg', 'http://www.bloomberg.com/quote/');
INSERT INTO `PROPERTY` (`PROPERTY_ID`, `PROPERTY_KEY`, `NAME`, `VALUE`) VALUES (6, 'price.selector', 'bloomberg', 'span.price');
INSERT INTO `PROPERTY` (`PROPERTY_ID`, `PROPERTY_KEY`, `NAME`, `VALUE`) VALUES (7, 'price.date.selector', 'bloomberg', 'div.quote_scoreboard p.fine_print');
INSERT INTO `PROPERTY` (`PROPERTY_ID`, `PROPERTY_KEY`, `NAME`, `VALUE`) VALUES (8, 'price.date.pattern', 'bloomberg', '''As of ''HH:mm:ss'' ET on ''MM/dd/YYYY''.''');
INSERT INTO `PROPERTY` (`PROPERTY_ID`, `PROPERTY_KEY`, `NAME`, `VALUE`) VALUES (9, 'price.date.tmz', 'bloomberg', 'America/New_York');
INSERT INTO `PROPERTY` (`PROPERTY_ID`, `PROPERTY_KEY`, `NAME`, `VALUE`) VALUES (10, 'retry.limit', 'bloomberg', '3');
INSERT INTO `PROPERTY` (`PROPERTY_ID`, `PROPERTY_KEY`, `NAME`, `VALUE`) VALUES (11, 'retry.delay', 'bloomberg', '3000');

INSERT INTO `CURRENCY` (`CURRENCY_ID`, `CODE`, `COUNTRY`, `NAME`) VALUES (1, 'CHF', 'Switzerland', 'Swiss Franc');
INSERT INTO `CURRENCY` (`CURRENCY_ID`, `CODE`, `COUNTRY`, `NAME`) VALUES (2, 'USD', 'United States', 'US Dollar');
INSERT INTO `CURRENCY` (`CURRENCY_ID`, `CODE`, `COUNTRY`, `NAME`) VALUES (3, 'GBP', 'United Kingdom', 'British Pound');

INSERT INTO `EXCHANGE_RATE` (`EXCHANGE_RATE_ID`, `EXCHANGE_RATE`, `BBG_SYMBOL`, `FROM_CURRENCY_ID`, `TO_CURRENCY_ID`) VALUES (1, NULL, 'CHFUSD:CUR', '1', '2');
INSERT INTO `EXCHANGE_RATE` (`EXCHANGE_RATE_ID`, `EXCHANGE_RATE`, `BBG_SYMBOL`, `FROM_CURRENCY_ID`, `TO_CURRENCY_ID`) VALUES (2, NULL, 'CHFGBP:CUR', '1', '3');
INSERT INTO `EXCHANGE_RATE` (`EXCHANGE_RATE_ID`, `EXCHANGE_RATE`, `BBG_SYMBOL`, `FROM_CURRENCY_ID`, `TO_CURRENCY_ID`) VALUES (3, NULL, 'USDCHF:CUR', '2', '1');
INSERT INTO `EXCHANGE_RATE` (`EXCHANGE_RATE_ID`, `EXCHANGE_RATE`, `BBG_SYMBOL`, `FROM_CURRENCY_ID`, `TO_CURRENCY_ID`) VALUES (4, NULL, 'USDGBP:CUR', '2', '3');
INSERT INTO `EXCHANGE_RATE` (`EXCHANGE_RATE_ID`, `EXCHANGE_RATE`, `BBG_SYMBOL`, `FROM_CURRENCY_ID`, `TO_CURRENCY_ID`) VALUES (5, NULL, 'GBPCHF:CUR', '3', '1');
INSERT INTO `EXCHANGE_RATE` (`EXCHANGE_RATE_ID`, `EXCHANGE_RATE`, `BBG_SYMBOL`, `FROM_CURRENCY_ID`, `TO_CURRENCY_ID`) VALUES (6, NULL, 'GBPUSD:CUR', '3', '2');

INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (1, NULL, 'UBS AG', NULL, 'UBSN:VX', 'SHARE', 1, NULL);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (2, NULL, 'UBS AG', 16.24, NULL, 'OPTION', 1, 1);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (3, NULL, 'UBS AG', 18.9, NULL, 'OPTION', 1, 1);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (4, NULL, 'UBS AG', 15.42, NULL, 'OPTION', 1, 1);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (5, NULL, 'UBS AG', 10.21, NULL, 'OPTION', 1, 1);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (6, NULL, 'UBS AG', 14.47, NULL, 'OPTION', 1, 1);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (7, NULL, 'UBS AG', 22.55, NULL, 'OPTION', 1, 1);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (8, NULL, 'UBS AG', 25.57, NULL, 'OPTION', 1, 1);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (9, NULL, 'UBS AG', NULL, 'UBSN:VX', 'RSU', 1, NULL);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (10, NULL, 'Coca-Cola Co', NULL, 'KO:US', 'SHARE', 2, NULL);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (11, NULL, 'Abercrombie & Fitch Co', NULL, 'ANF:US', 'SHARE', 2, NULL);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (12, NULL, 'Citigroup Inc', NULL, 'C:US', 'SHARE', 2, NULL);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (13, NULL, 'UBS Vitainvest 25 World', NULL, 'UCHV25U:SW', 'FUND', 1, NULL);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (14, NULL, 'UBS Vitainvest 40 World', NULL, 'UCHV40U:SW', 'FUND', 1, NULL);
INSERT INTO `PRODUCT` (`PRODUCT_ID`, `MARKET_PRICE`, `NAME`, `STRIKE_PRICE`, `BBG_SYMBOL`, `PRODUCT_TYPE`, `CURRENCY_ID`, `UNDERLYING_ID`) VALUES (15, NULL, 'Fidelity Funds - Thailand Fund', NULL, 'FIDLTHI:LX', 'FUND', 2, NULL);